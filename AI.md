## AI
> 减少AI幻觉（RAG知识库、微调、提示词优化）
>
> 提示词优化技巧
>
> 开发AI需要有哪些关注点（可行性分析、成本、性能、准确度）
>
> 使用什么AI框架
>
> 批处理的使用场景
>
> 向量数据库选择（ES）
>


### AI幻觉
> AI幻觉：非常自信的胡说八道，前后矛盾、答非所问、虚假来源等等
> + 数据层面
>  + 训练数据质量问题：海量数据里边存在一些错误，过时的数据
>  + 训练数据答非所问：当遇到知识盲区时，AI为了“完成任务”，可能会胡编乱造
>
> + 模型层面
>  + 算法与架构局限
>  + 过拟合，处理新数据时泛化能力差
>
> + 减少方法
>  1. 检索增强生成（RAG）：让AI在回答问题时，首先从外部权威知识库（如最新的数据库、文档）中检索相关信息，然后基于这些事实信息生成回答
>  2. 模型微调：改进模型：更高质量的数据清理和数据采集
>  3. 提示词优化：改进与AI交互的指令
>  4. 透明化明确告知用户内容是由AI生成，并可能包含错误


### 提示词优化
> + 角色设定
> + 提供上下文
> + 明确定义任务
> + 指定输出格式
> + 链式思想
> + 提供Demo
> + 迭代和细化（上次效果不理想，接着之前基础上继续优化询问）

> &#x274c; 错误 
>
> “写一封邮件给客户。”

> &#x2705; 正确
>
> 【角色】 你是一名专业的客户经理。
>
> 【背景】 客户张总（zhangzong@example.com）订购的一批货物（订单号：ORD-77891）因为天气原因要延迟3天送达。
>
> 【任务】 请用中文给张总写一封正式的道歉和通知邮件。
>
> 【要求】 邮件需要包括：1. 礼貌的问候和致歉。 2. 说明延迟原因和新的预计送达时间。 3. 表示歉意并提供一个小补偿（例如下次订单享95折优惠）。 4. 专业的结束语。语气要诚恳、专业。


### 思维链
> `零样本`：不提供任何例子；适用【简单直接的任务】
>
> `少样本`：提供少量（通常1-5个）输入-输出例子作为“样板”；适用【任务非常复杂、输出格式有非常特定要求】


### 开发AI有哪些关注
> 1. 需求可行性分析：AI的用途、商业价值
> 2. 数据可行性分析：数据来源，数据质量，特征工程
> 3. 技术可行性分析：从头开发/预定模型+微调/第三方API
> 4. 成本：缓存，模型选择
> 5. 性能：流式输出（用户体验），推理加速（模型量化），异步处理，批处理（架构优化）
> 6. 准确率
> 7. 合法性：遵循当地相关法律


### 如何减少成本
> 1. 先使用最便宜的第三方API，试试产出怎么样；效果不客观的话，坚定不移地采用“预训练+微调”路径
> 2. 数据训练成本，先几百或几千个高质量样本微调，看效果逐步增加数据
> 3. 模型选择 fp16
> 4. 部署成本 模型权重从fp32转换为int8或int4
> 5. 缓存
>   + Prompt归一化：去重空格，统一大小写，删除停用词
>   + 语义缓存：Prompt向量化 -> 相似度比较（余弦相似度） -> 阈值判断（0.9）-> 向量数据库（Elasticsearch7版本，业务在使用）
>   + LLM自身生成缓存键：使用一个小型、快速的LLM来分析用户提问，并为其生成一个标准化的、用于缓存的键或摘要（AI总结摘要）
>   + 监控缓存命中率： 定期执行 Redis + INFO 命令； Grafana + Prometheus 


### 批处理的使用场景
> 异步任务处理（后台作业）
>
> 多轮对话中的上下文缓存与批处理
>
> 离线推理与数据预处理
>
> 模型服务网关